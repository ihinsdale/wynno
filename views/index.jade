extends layout

block nav
  .navbar.navbar-default.navbar-fixed-top(role="navigation")
    .navbar-header
      a.navbar-brand.wynno(href='#')
        span w
        span y
        span n
        span n
        span o
      button.navbar-toggle(ng-init="navCollapsed = true", ng-click="navCollapsed = !navCollapsed", ng-show="currentPathNeedsAuth")
        span.sr-only Toggle navigation
        span.icomoon-filter.ayeGreen(ng-show="active[0]")
        span.icomoon-filter.nayRed(ng-show="active[1]")
        span.icomoon-cogs(ng-show="active[2]")
      a.navbar-toggle.navMobileSignIn(href='/auth/twitter', ng-show="!currentPathNeedsAuth")
        .twitterBird
          span.icomoon-twitter.twitterBlue
        .signIn Sign in with Twitter

    // Collect the stuff that gets toggled hidden
    .collapse.navbar-collapse(collapse="navCollapsed")
      ul.nav.navbar-nav.navbar-left.wynnoButtons(ng-show="currentPathNeedsAuth")
        // these items displayed on mobile
        li.passing.visible-xs(ng-class='{active: active[0]}')
          a(href='#/in', ng-click='doCollapse()')
            span.icomoon-filter
            span.wynnoButtonDesc Good Stuff
        li.failing.visible-xs(ng-class='{active: active[1]}')
          a(href='#/out', ng-click='doCollapse()')
            span.icomoon-filter
            span.wynnoButtonDesc The Rest
        li.visible-xs(ng-class='{active: active[2]}')
          a(href='#/settings', ng-click='doCollapse()')
            span.icomoon-cogs
            span.wynnoButtonDesc Settings
        li.dropdown.visible-xs
          a.dropdown-toggle(href="", data-toggle="dropdown", ng-bind="username")
            span b.caret
          ul.dropdown-menu
            li
              a(ng-click="logout('twitter')")
                span.icomoon-exit
                span Sign out

        // these items displayed on not-mobile
        li.passing.hidden-xs(ng-class='{active: active[0]}')
          a(href='#/in', tooltip-placement="bottom",tooltip="Good Stuff", tooltip-popup-delay='400')
            span.icomoon-filter
        li.failing.hidden-xs(ng-class='{active: active[1]}')
          a(href='#/out', tooltip-placement="bottom", tooltip="The Rest", tooltip-popup-delay='400')
            span.icomoon-filter
        li.hidden-xs(ng-class='{active: active[2]}')
          a(href='#/settings', tooltip-placement="bottom", tooltip="Settings", tooltip-popup-delay='400')
            span.icomoon-cogs

      .userButtons.navbar-right.hidden-xs
        a.btn.btn-default.navbar-btn.signInContainer(ng-cloak, href='/auth/twitter', ng-if="!currentPathNeedsAuth")
          .twitterBird
            span.icomoon-twitter.twitterBlue
          .signIn Sign in with Twitter
        .dropdown
          a.btn.btn-default.navbar-btn.username.dropdown-toggle(ng-cloak, ng-if="currentPathNeedsAuth", href='', ng-bind="username")
          ul.dropdown-menu
            li
              a(ng-click="logout('twitter')")
                span.icomoon-exit
                span Sign out

block content
  .container(ng-view='')
  script.
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-XXXXX-X');
    ga('send', 'pageview');

block footer
  .footer
    .footerItem.footerBrand &copy; 2014 wynno
    .footerItem
      a(href="#/terms") Terms
    .footerItem
      a(href="#/privacy") Privacy
  .feedbackContainer(ng-click="openFeedback()")
    span.icomoon-bullhorn
    span.feedback Feedback 